import { generateUploadUrl, upload } from '../src/api/upload'
import { ActionInputsBuilder } from './types'
import { FetchedSbomDocument } from '../src/types/arguments'

describe('Upload', () => {
  let actionInputsBuilder = new ActionInputsBuilder()

  it('Should generate a URL with all the search parameters', async () => {
    let actionInputs = actionInputsBuilder.build()
    let url = generateUploadUrl(actionInputs)
    expect(url.href).toBe(
      'https://www.servicenow.com/api/sbom/core/upload?businessApplicationId=sample-business-application-id&businessApplicationName=sample-business-application-name&buildId=sample-build-id&productModelId=sample-product-model-id&requestedBy=sample-request-by&lifecycleStage=pre_production&sbomSource=sample-source-sbom'
    )
  })
})
